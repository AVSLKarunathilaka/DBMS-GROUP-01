DELIMITER //

CREATE PROCEDURE GetMarksByCourseCode(IN p_course_code VARCHAR(10))
BEGIN
    SELECT 
        s.registration_no,
        ac.name AS assessment_type,
        m.mark
    FROM Mark m
    JOIN AssessmentComponent ac ON m.assessment_id = ac.assessment_id
    JOIN Student s ON m.student_id = s.user_id
    WHERE ac.course_code = p_course_code
    ORDER BY s.registration_no, ac.name;
END //

DELIMITER ;