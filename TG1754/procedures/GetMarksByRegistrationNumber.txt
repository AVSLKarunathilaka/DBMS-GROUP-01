DELIMITER //

CREATE PROCEDURE GetMarksByRegistrationNumber(IN p_registration_number VARCHAR(15))
BEGIN
    SELECT 
        ac.course_code,
        ac.name AS assessment_type,
        m.mark
    FROM Mark m
    JOIN AssessmentComponent ac ON m.assessment_id = ac.assessment_id
    JOIN Student s ON m.student_id = s.user_id
    WHERE s.registration_no = p_registration_number
    ORDER BY ac.course_code, ac.name;
END //

DELIMITER ;